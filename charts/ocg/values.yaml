# Open Community Groups chart default configuration values

imagePullSecrets: []
imageTag: ""
nameOverride: ""
pullPolicy: IfNotPresent

# Enable dynamic resource name prefix
#
# Enabling the dynamic resource name prefix ensures that the resources are named dynamically based on the Helm
# installation's name. This allows multiple installations of this chart in a single Kubernetes namespace. The prefix
# can be defined by using the `fullnameOverride`.
dynamicResourceNamePrefixEnabled: false

# Overwrites the installation's fullname generation (used for the dynamic resource name prefix)
fullnameOverride: ""

# Directory path where the configuration files should be mounted
configDir: "/home/ocg/.config/ocg"

# Database configuration
db:
  host: ""
  port: 5432
  dbname: ocg
  user: postgres
  password: postgres

# Log configuration
log:
  # Output format [json|pretty]
  format: json

# Database migrator configuration
dbmigrator:
  job:
    image:
      # Database migrator image repository (without the tag)
      repository: ocg/dbmigrator

# Server configuration
server:
  # Address to listen on
  addr: 0.0.0.0:9000

  # Basic auth configuration
  basicAuth:
    # Enable basic auth
    enabled: false
    # Basic auth username
    username: ocg
    # Basic auth password
    password: changeme

  # Ingress configuration
  ingress:
    enabled: true
    annotations:
      kubernetes.io/ingress.class: nginx
    rules: []
    tls: []

  # Service configuration
  service:
    type: NodePort
    port: 80

  # Deployment configuration
  deploy:
    replicaCount: 1
    image:
      # Database migrator image repository (without the tag)
      repository: ocg/server
    resources: {}

# PostgreSQL configuration
postgresql:
  enabled: true
  auth:
    enablePostgresUser: true
    postgresqlPassword: postgres
    database: ocg
  image:
    repository: bitnami/postgresql
    tag: 17.2.0-debian-12-r3
  postgresqlDataDir: /data/pgdata
  primary:
    persistence:
      mountPath: /data
