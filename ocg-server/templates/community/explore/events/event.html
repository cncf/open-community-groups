{% import "common.html" as common -%}

{# Event card -#}
<div class="p-5 md:p-7">
  <div class="flex flex-1 flex-row items-stretch">
    {# Event icon -#}
    {% call common::logo(logo_url = logo_url, classes = "hidden md:block h-[140px] w-[140px] min-w-[140px]", size = 140, color = group_color, name = Some(group_name)) -%}
    {% call common::logo(logo_url = logo_url, classes = "block h-14 w-14 min-w-14 md:hidden", size = 60, color = group_color) -%}
    {# End event icon -#}

    <div class="min-w-0 pl-4 content-center">
      <div class="flex flex-col justify-between h-full">
        <div>
          {# Event group name -#}
          <div class="truncate leading-3 text-gray-400">
            <span class="text-xs font-semibold tracking-wide uppercase">{{ group_name }}</span>
          </div>
          {# End event group name -#}

          {# Event name -#}
          <div class="line-clamp-2 text-[0.9rem] md:text-base font-semibold md:mt-1 md:line-clamp-1">
            {{ name|demoji }}
          </div>
          {# End event name -#}
        </div>

        {# Event description on desktop -#}
        {% if let Some(description_short) = description_short -%}
          <div class="hidden h-[36px] md:my-2 md:block">
            <p class="text-[0.8rem] text-gray-500 leading-[1.2rem] line-clamp-2">{{ description_short|demoji }}</p>
          </div>
        {% endif -%}
        {# End event description on desktop -#}

        <div class="hidden md:block">
          {# Event location -#}
          <div class="flex flex-row items-center leading-4 pt-1 lg:pt-2 h-[32px]">
            <img class="-mt-[2px] w-3 h-3 me-2"
                 height="12"
                 width="12"
                 src="/static/images/icons/location.svg"
                 alt="Location icon" />
            {% if kind != EventKind::Virtual -%}
              {% if let Some(location) = self.location(36) -%}
                <div class="hidden truncate me-3 text-gray-700 text-xs uppercase xl:block">
                  {{ self.location(57).expect("location to exist") }}
                </div>
                <div class="block truncate me-3 text-gray-700 text-xs uppercase xl:hidden">{{ location }}</div>
              {% endif -%}
            {% endif -%}
            <span class="-mt-[1px] border border-gray-200 text-gray-500 text-[10px] text-nowrap uppercase font-medium px-1.5 rounded-full">{{ kind }}</span>
          </div>
          {# End event location -#}

          {# Event date -#}
          <div class="flex items-center pt-0.5">
            {% if let Some(starts_at) = starts_at -%}
              <div class="flex flex-row items-center leading-4">
                <img class="-mt-[2px] w-3 h-3 me-2"
                     height="12"
                     width="12"
                     src="/static/images/icons/date.svg"
                     alt="Date icon" />
                <span class="truncate text-gray-700 text-xs uppercase">{{ starts_at.with_timezone(timezone).format("%A, %B %e, %G · %I:%M %p %Z") }}</span>
              </div>
            {% endif -%}
            {% if canceled -%}
              <span class="ms-3 border text-red-500 border-red-300 text-[10px] uppercase font-medium px-2.5 py-0.5 rounded-full">Canceled</span>
            {% endif -%}
          </div>
          {# End event date -#}
        </div>
      </div>
    </div>
  </div>

  {# Mobile content -#}
  <div class="block md:hidden">
    {# Event location -#}
    <div class="flex flex-row items-center mt-3 h-[21px]">
      <img class="-mt-[2px] w-3 h-3 me-2"
           height="12"
           width="12"
           src="/static/images/icons/location.svg"
           alt="Location icon" />
      {% if kind != EventKind::Virtual -%}
        {% if let Some(location) = self.location(25) -%}
          <div class="truncate me-3 text-gray-700 text-xs uppercase">{{ location }}</div>
        {% endif -%}
      {% endif -%}
      <span class="-mt-[1px] border border-gray-200 text-gray-500 text-[10px] text-nowrap uppercase font-medium px-1.5 rounded-full">{{ kind }}</span>
    </div>
    {# End event location -#}

    {# Event date -#}
    <div class="flex items-center pt-1">
      {% if let Some(starts_at) = starts_at -%}
        <div class="flex flex-row items-center leading-4">
          <img class="-mt-[2px] w-3 h-3 me-2"
               height="12"
               width="12"
               src="/static/images/icons/date.svg"
               alt="Date icon" />
          <span class="truncate text-gray-700 text-xs uppercase">{{ starts_at.with_timezone(timezone).format("%A, %B %e, %G · %I:%M %p %Z") }}</span>
        </div>
      {% endif -%}
      {% if canceled -%}
        <span class="ms-3 border text-red-500 border-red-300 text-[10px] uppercase font-medium px-2.5 py-0.5 rounded-full">Canceled</span>
      {% endif -%}
    </div>
    {# End event date -#}
  </div>
  {# End mobile content -#}

  {# Description -#}
  {% if let Some(description_short) = description_short -%}
    <div class="block md:hidden">
      <p class="text-xs text-gray-500 leading-[1.2rem] line-clamp-2 mt-3">{{ description_short|demoji }}</p>
    </div>
  {% endif -%}
  {# End description -#}
</div>
{# End event card -#}
