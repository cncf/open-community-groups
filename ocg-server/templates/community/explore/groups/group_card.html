{% import "common.html" as common -%}

{# Group card -#}
<a class="p-5 md:p-7 group select-none"
   href="/group/{{ group.slug }}"
   hx-boost="true"
   hx-target="body">
  <div class="flex flex-1 flex-row items-stretch">
    <div class="group-hover:opacity-75 transition-opacity">
      {# Group icon -#}
      {% call common::logo(logo_url = group.logo_url, classes = "hidden md:block h-[140px] w-[140px] min-w-[140px]", size = 140, color = group.color, name = Some(group.name)) -%}
      {% call common::logo(logo_url = group.logo_url, classes = "block h-14 w-14 min-w-14 md:hidden", size = 60, color = group.color) -%}
      {# End group icon -#}
    </div>

    <div class="min-w-0 pl-4 content-center">
      <div class="flex flex-col justify-between h-full">
        <div>
          {# Group region -#}
          <div class="truncate leading-3 text-stone-400">
            <span class="text-xs font-semibold tracking-wide uppercase">
              {% if let Some(region) = &group.region -%}
                {{ region.name }}
              {% else -%}
                {{ group.category.name }}
              {% endif -%}
            </span>
          </div>
          {# End group region -#}

          {# Group name -#}
          <div class="line-clamp-2 text-[0.9rem] md:text-base font-semibold md:mt-1 md:line-clamp-1 group-hover:underline">
            {{ group.name|demoji }}
          </div>
          {# End group name -#}
        </div>

        {% if let Some(description_short) = group.description_short -%}
          {# Group description -#}
          <div class="hidden relative text-[0.8rem] text-stone-500 leading-[1.2rem] line-clamp-2 h-[36px] md:my-2 md:block">
            {{ description_short|demoji }}
          </div>
          {# End group description -#}
        {% endif -%}

        <div class="hidden md:block">
          {# Group location -#}
          <div class="flex flex-row items-center leading-4 pt-1 lg:pt-2 h-[28px]">
            {% if let Some(location) = self.group.location(48) -%}
              <div class="svg-icon mt-0.5 w-3 h-3 me-2 bg-stone-700 icon-location"></div>
              <div class="hidden truncate text-stone-700 text-xs uppercase xl:block">
                {{ self.group.location(67).expect("location to exist") }}
              </div>
              <div class="block truncate text-stone-700 text-xs uppercase xl:hidden">{{ location }}</div>
            {% endif -%}
          </div>
          {# End group location -#}

          {# Group creation date -#}
          <div class="flex items-center pt-0.75">
            <div class="flex flex-row items-center leading-4">
              <div class="svg-icon -mt-[2px] w-3 h-3 me-2 bg-stone-700 icon-date"></div>
              <span class="truncate text-stone-700 text-xs uppercase">{{ group.created_at.format("%B %e · %Y") }}</span>
            </div>
          </div>
          {# End group creation date -#}
        </div>
      </div>
    </div>
  </div>

  {# Mobile content -#}
  <div class="block md:hidden">
    {# Group location -#}
    <div class="flex flex-row items-center mt-3 h-[21px]">
      <div class="svg-icon mt-0.5 w-3 h-3 me-2 bg-stone-700 icon-location"></div>
      <div class="block truncate text-stone-700 text-xs uppercase xl:hidden">
        {% if let Some(location) = self.group.location(40) -%}
          {{ location }}
        {% else -%}
          No location provided
        {% endif -%}
      </div>
    </div>
    {# End group location -#}

    {# Group creation date -#}
    <div class="flex items-center pt-1">
      <div class="flex flex-row items-center leading-4">
        <div class="svg-icon -mt-[2px] w-3 h-3 me-2 bg-stone-700 icon-date"></div>
        <span class="truncate text-stone-700 text-xs uppercase">{{ group.created_at.format("%B %e · %Y") }}</span>
      </div>
    </div>
    {# End group creation date -#}
  </div>
  {# End mobile content -#}

  {% if let Some(description_short) = group.description_short -%}
    {# Mobile group description -#}
    <div class="block md:hidden">
      <p class="text-xs text-stone-500 leading-[1.2rem] line-clamp-2 mt-3">{{ description_short|demoji }}</p>
    </div>
    {# End mobile group description -#}
  {% endif -%}
</a>
{# End group card -#}
