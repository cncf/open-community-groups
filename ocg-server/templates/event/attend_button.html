{# Attend button section -#}
<div id="attendance-container"
     {% if let Some(starts_at) = &event.starts_at %}data-starts="{{ starts_at.to_rfc3339() }}"{% endif %}
     {% if let Some(capacity) = &event.capacity %}data-capacity="{{ capacity }}"{% endif %}
     {% if let Some(remaining_capacity) = &event.remaining_capacity %}
       data-remaining-capacity="{{ remaining_capacity }}"
     {% endif %}
     data-is-live="{{ event.is_live() }}"
     data-has-recording="{{ event.meeting_recording_url.is_some() }}"
     class="flex flex-row flex-wrap gap-2">

  <!-- Loading spinner (shown initially) -->
  <button id="loading-btn"
          disabled
          class="group relative is-loading btn-primary-outline w-52 h-10 sm:h-[30px] opacity-50 cursor-not-allowed flex items-center justify-center">
    {% import "macros/ui.html" as ui -%}
    {{ ui::spinner(size = "size-4") -}}
    <span class="ms-2">Checking...</span>
  </button>

  <!-- Sign in prompt (hidden initially) -->
  <button id="signin-btn"
          data-path="{{ path }}"
          class="hidden group btn-primary-outline-anchor w-52 h-10 sm:h-[30px] flex items-center justify-center space-x-2">
    <div class="svg-icon size-3 icon-user-plus"></div>
    <span>Attend event</span>
  </button>

  <!-- Attend button (hidden initially) -->
  <button id="attend-btn"
          hx-post="/{{ event.community.name }}/event/{{ event.event_id }}/attend"
          hx-swap="none"
          class="hidden group btn-primary-outline w-52 h-10 sm:h-[30px] flex items-center justify-center space-x-2">
    <div class="svg-icon size-3 icon-user-plus"></div>
    <span>Attend event</span>
  </button>

  <!-- Join meeting button (hidden initially, shown for attendees when live) -->
  {% if let Some(meeting_join_url) = &event.meeting_join_url %}
    <a id="join-meeting-btn"
       href="{{ meeting_join_url }}"
       data-join-link
       target="_blank"
       rel="noopener noreferrer"
       class="hidden group btn-primary-outline-anchor w-52 h-10 sm:h-[30px] flex items-center justify-center space-x-2">
      <div class="svg-icon size-3 icon-meeting"></div>
      <span>Join meeting</span>
    </a>
  {% endif %}

  <!-- Leave button (hidden initially) -->
  <button id="leave-btn"
          hx-delete="/{{ event.community.name }}/event/{{ event.event_id }}/leave"
          hx-trigger="confirmed"
          hx-swap="none"
          class="hidden group btn-primary-outline w-52 h-10 sm:h-[30px] flex items-center justify-center space-x-2">
    <div class="svg-icon size-3 icon-logout"></div>
    <span>Cancel attendance</span>
  </button>

  <!-- Hidden element that checks attendance status -->
  <div id="attendance-checker"
       hx-get="/{{ event.community.name }}/event/{{ event.event_id }}/attendance"
       hx-trigger="load, attendance-changed from:body"
       hx-swap="none"></div>
</div>
