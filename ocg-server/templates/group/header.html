{% import "common.html" as common -%}

{# Header -#}
<header id="header">
  {# Navigation bar -#}
  <nav class="flex items-center justify-between border-b border-transparent h-20 min-h-20 px-4 lg:px-5">
    <div class="flex items-center gap-x-6">
      {# Logo -#}
      <div class="me-3">
        <div class="-m-1.5 p-1.5">
          <img class="h-10 w-50"
               width="208"
               height="40"
               src="https://raw.githubusercontent.com/cncf/artwork/main/other/cloud-native-community-groups/color/cloudnativecommunitygroups_color.svg"
               alt="Logo" />
        </div>
      </div>
      {# End logo -#}

      {# Desktop links -#}
      <div class="hidden lg:flex lg:gap-x-8">
        {% call link(content = "Home", href = "/", current_path = "/group") -%}
        {% call link(content = "Explore", href = "/explore", current_path = "/group") -%}
        {% call button(id = "open-new-group-btn", content = "New group") -%}
      </div>
      {# End desktop links -#}
    </div>

    {# Mobile menu button -#}
    <div class="flex lg:hidden">
      <button id="open-navbar-mobile"
              type="button"
              class="-m-2.5 inline-flex items-center justify-center rounded-md p-2.5">
        <span class="sr-only">Open main menu</span>
        <div class="svg-icon h-6 w-6 bg-stone-700 icon-lines"></div>
      </button>
    </div>
    {# End mobile menu button -#}

    {# Desktop buttons -#}
    <div class="hidden lg:flex lg:flex-1 lg:justify-end space-x-4">
      {# Sign up button -#}
      <button id="signup-btn" class="btn-secondary w-[120px]" disabled>Sign up</button>

      {# Log in button -#}
      <button id="login-btn" class="btn-primary w-[120px]" disabled>Log in</button>
    </div>
    {# End desktop buttons -#}
  </nav>
  {# End navigation bar -#}

  {# Mobile menu -#}
  <div class="hidden lg:hidden"
       role="dialog"
       aria-modal="true"
       id="navbar-mobile">
    <div class="hidden fixed inset-0 z-20" id="backdrop-backdrop"></div>
    <div class="fixed inset-y-0 right-0 z-20 w-full overflow-y-auto bg-white px-6 py-6 sm:max-w-sm sm:ring-1 sm:ring-stone-900/10">
      <div class="flex items-center justify-between">
        {# Close menu button -#}
        <button id="close-navbar-mobile"
                type="button"
                class="-m-2.5 rounded-md p-2.5">
          <span class="sr-only">Close menu</span>
          <div class="svg-icon h-6 w-6 bg-stone-700 icon-close"></div>
        </button>
        {# End close menu button -#}
      </div>
      <div class="mt-6 flow-root">
        <div class="-my-6 divide-y divide-stone-500/10">
          {# Mobile links -#}
          <div class="space-y-2 py-6">
            {% call mobile_link(content = "Home", href = "/") -%}
            {% call mobile_link(content = "Explore", href = "/explore") -%}
            {% call mobile_button(content = "New group", id = "open-new-group-mobile-btn") -%}
            <script type="module">
              import {
                toggleMobileNavbarVisibility,
                toggleModalVisibility
              } from '/static/js/common/common.js';

              const openNewGroupMobileBtn = document.getElementById('open-new-group-mobile-btn');
              if (openNewGroupMobileBtn) {
                openNewGroupMobileBtn.addEventListener('click', () => {
                  toggleModalVisibility('new-group-modal')
                  toggleMobileNavbarVisibility();
                });
              }
            </script>
          </div>
          {# End mobile links -#}

          {# Mobile buttons - Sign up / Log in -#}
          <div class="py-6">
            {% call mobile_link(content = "Sign up", href = "#") -%}
            {% call mobile_link(content = "Login in", href = "#") -%}
          </div>
          {# End mobile buttons - Sign up / Log in -#}
        </div>
      </div>
    </div>
  </div>
  {# End mobile menu -#}
</header>
{# End header -#}

<script type="module">
  import {
    toggleMobileNavbarVisibility
  } from '/static/js/common/common.js';

  const openNavbarMobile = document.getElementById('open-navbar-mobile');
  if (openNavbarMobile) {
    openNavbarMobile.addEventListener('click', toggleMobileNavbarVisibility);
  }

  const closeNavbarMobileBtn = document.getElementById('close-navbar-mobile');
  if (closeNavbarMobileBtn) {
    closeNavbarMobileBtn.addEventListener('click', toggleMobileNavbarVisibility);
  }
</script>

{# Link -#}
{% macro link(content, href, current_path, extra_styles = None) -%}
  {% let extra_styles_ = extra_styles.unwrap_or("") -%}

  <a href="{{ href }}"
     class="mx-3 pb-1 border-0 border-primary-500 text-base font-semibold tracking-widest text-primary-500 uppercase border-b-2 border-transparent hover:border-primary-300 {{ extra_styles_ }}">{{ content }}</a>
{% endmacro link -%}
{# End link -#}

{# Button -#}
{% macro button(id, content, extra_styles = None) -%}
  {% let extra_styles_ = extra_styles.unwrap_or("") -%}

  <button id="{{ id }}"
          class="mx-3 pb-1 border-0 border-primary-500 text-base font-semibold tracking-widest text-primary-500 uppercase border-b-2 border-transparent hover:border-primary-300 {{ extra_styles_ }}">
    {{ content }}
  </button>
{% endmacro button -%}
{# End button -#}

{# Mobile link -#}
{% macro mobile_link(content, href, extra_styles = None) -%}
  {% let extra_styles_ = extra_styles.unwrap_or("") -%}

  <a href="{{ href }}"
     class="-mx-3 block rounded-lg px-3 py-2 text-base font-semibold leading-7 text-stone-900 hover:bg-stone-50 {{ extra_styles_ }}">
    {{ content }}
  </a>
{% endmacro mobile_link -%}
{# End mobile link -#}

{# Mobile button -#}
{% macro mobile_button(content, id, extra_styles = None) -%}
  {% let extra_styles_ = extra_styles.unwrap_or("") -%}

  <button id="{{ id }}"
          class="-mx-3 block rounded-lg px-3 py-2 text-base font-semibold leading-7 text-stone-900 hover:bg-stone-50 {{ extra_styles_ }}">
    {{ content }}
  </button>
{% endmacro mobile_button -%}
{# End mobile button -#}
