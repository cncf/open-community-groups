<!-- Filters header -->
{% macro header(form_name) %}
  <div class="flex justify-between items-center border-solid border-0 border-b border-gray-100 p-5">
    <div
      class="font-semibold text-sm text-black"
    >
      Filters
    </div>
    <button
      class="hidden bg-white items-center py-1 px-3 text-xs text-center text-primary-500 rounded-full border border-primary-500 lg:flex  hover:text-white hover:bg-primary-500 focus:ring-4 focus:ring-primary-300 active:ring-4 active:ring-primary-300 focus:bg-primary-700 focus:text-white"
      onclick="resetFilters(`{{ form_name }}`)"
    >
      Reset
    </button>
  </div>
{% endmacro %}
<!-- End filters header -->

<!-- Entity => Events/Groups -->
{% macro entity_radio(selected) %}
  <div class="px-6 py-7 border-b border-gray-100">
    <ul class="flex items-center w-full">
      {% if selected == Entity::Groups %}
        <li class="w-full">
          <button
            hx-get='/explore/events-section'
            hx-trigger="click"
            hx-target="#entity-section"
            htmx-indicator="#spinner-entity-section"
            hx-boost="true"
            class="inline-flex items-center justify-between w-full p-3 text-gray-500 bg-white border rounded-l-lg cursor-pointer hover:bg-gray-50">
            <div class="flex w-full flex-col items-center">
              <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M0 0h24v24H0z"></path><path d="M17 10H7v2h10v-2zm2-7h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zm-5-5H7v2h7v-2z"></path></svg>
              <div class="text-[0.825rem] mt-1.5">Events</div>
            </div>
          </button>
        </li>
        <li class="w-full">
          <div class="inline-flex items-center justify-between w-full p-3 text-gray-500 bg-white border rounded-r-lg text-primary-500 border-primary-500">
            <div class="flex w-full flex-col items-center">
              <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 640 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M72 88a56 56 0 1 1 112 0A56 56 0 1 1 72 88zM64 245.7C54 256.9 48 271.8 48 288s6 31.1 16 42.3V245.7zm144.4-49.3C178.7 222.7 160 261.2 160 304c0 34.3 12 65.8 32 90.5V416c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V389.2C26.2 371.2 0 332.7 0 288c0-61.9 50.1-112 112-112h32c24 0 46.2 7.5 64.4 20.3zM448 416V394.5c20-24.7 32-56.2 32-90.5c0-42.8-18.7-81.3-48.4-107.7C449.8 183.5 472 176 496 176h32c61.9 0 112 50.1 112 112c0 44.7-26.2 83.2-64 101.2V416c0 17.7-14.3 32-32 32H480c-17.7 0-32-14.3-32-32zm8-328a56 56 0 1 1 112 0A56 56 0 1 1 456 88zM576 245.7v84.7c10-11.3 16-26.1 16-42.3s-6-31.1-16-42.3zM320 32a64 64 0 1 1 0 128 64 64 0 1 1 0-128zM240 304c0 16.2 6 31 16 42.3V261.7c-10 11.3-16 26.1-16 42.3zm144-42.3v84.7c10-11.3 16-26.1 16-42.3s-6-31.1-16-42.3zM448 304c0 44.7-26.2 83.2-64 101.2V448c0 17.7-14.3 32-32 32H288c-17.7 0-32-14.3-32-32V405.2c-37.8-18-64-56.5-64-101.2c0-61.9 50.1-112 112-112h32c61.9 0 112 50.1 112 112z"></path></svg>
              <div class="text-[0.825rem] mt-1.5">Groups</div>
            </div>
          </div>
        </li>
      {% else %}
        <li class="w-full">
          <div class="inline-flex items-center justify-between w-full p-3 text-gray-500 bg-white border rounded-l-lg text-primary-500 border-primary-500">
            <div class="flex w-full flex-col items-center">
              <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M0 0h24v24H0z"></path><path d="M17 10H7v2h10v-2zm2-7h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zm-5-5H7v2h7v-2z"></path></svg>
              <div class="text-[0.825rem] mt-1.5">Events</div>
            </div>
          </div>
        </li>
        <li class="w-full">
          <button
              hx-get='/explore/groups-section'
              hx-trigger="click"
              hx-target="#entity-section"
              htmx-indicator="#spinner-entity-section"
              hx-boost="true"
              class="inline-flex items-center justify-between w-full p-3 text-gray-500 bg-white border rounded-r-lg cursor-pointer hover:bg-gray-50">
            <div class="flex w-full flex-col items-center">
              <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 640 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M72 88a56 56 0 1 1 112 0A56 56 0 1 1 72 88zM64 245.7C54 256.9 48 271.8 48 288s6 31.1 16 42.3V245.7zm144.4-49.3C178.7 222.7 160 261.2 160 304c0 34.3 12 65.8 32 90.5V416c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V389.2C26.2 371.2 0 332.7 0 288c0-61.9 50.1-112 112-112h32c24 0 46.2 7.5 64.4 20.3zM448 416V394.5c20-24.7 32-56.2 32-90.5c0-42.8-18.7-81.3-48.4-107.7C449.8 183.5 472 176 496 176h32c61.9 0 112 50.1 112 112c0 44.7-26.2 83.2-64 101.2V416c0 17.7-14.3 32-32 32H480c-17.7 0-32-14.3-32-32zm8-328a56 56 0 1 1 112 0A56 56 0 1 1 456 88zM576 245.7v84.7c10-11.3 16-26.1 16-42.3s-6-31.1-16-42.3zM320 32a64 64 0 1 1 0 128 64 64 0 1 1 0-128zM240 304c0 16.2 6 31 16 42.3V261.7c-10 11.3-16 26.1-16 42.3zm144-42.3v84.7c10-11.3 16-26.1 16-42.3s-6-31.1-16-42.3zM448 304c0 44.7-26.2 83.2-64 101.2V448c0 17.7-14.3 32-32 32H288c-17.7 0-32-14.3-32-32V405.2c-37.8-18-64-56.5-64-101.2c0-61.9 50.1-112 112-112h32c61.9 0 112 50.1 112 112z"></path></svg>
              <div class="text-[0.825rem] mt-1.5">Groups</div>
            </div>
          </button>
        </li>
      {% endif %}
    </ul>
  </div>
{% endmacro %}
<!-- End Entity => Events/Groups -->

<!-- Checkbox input -->
{% macro checkbox_input(name, label, value, active_filters, styles) %}
  <li data-item="input-item" class="{{ styles }}">
    <input type="checkbox" name="{{ name }}" id="{{ value }}" value="{{ value }}" class="hidden peer" {% if active_filters.contains(value.to_string().borrow()) %}checked{% endif %}>
    <label for="{{ value }}" class="inline-flex items-center justify-between w-full p-2 text-gray-500 bg-white border rounded-lg cursor-pointer peer-checked:border-primary-500 hover:text-gray-600 peer-checked:text-primary-500 hover:bg-gray-50">
      <div class="text-[0.825rem] text-center text-nowrap">{{ label }}</div>
    </label>
  </li>
{% endmacro %}
<!-- End checkbox input-->

<!-- Radio input -->
{% macro radio_input(name, label, value, active_filter, styles) %}
  <li data-item="input-item" class="{{ styles }}">
    {% if let Some(active) = active_filter %}
      <input type="radio" name="{{ name }}" id="{{ value }}" value="{{ value }}" class="hidden peer" {% if active.to_string() == value %}checked{% endif %}>
    {% else %}
      <input type="radio" name="{{ name }}" id="{{ value }}" value="{{ value }}" class="hidden peer">
    {% endif %}
    <label for="{{ value }}" class="inline-flex items-center justify-between w-full p-2 text-gray-500 bg-white border rounded-lg cursor-pointer peer-checked:border-primary-500 hover:text-gray-600 peer-checked:text-primary-500 hover:bg-gray-50">
      <div class="text-[0.825rem] text-center text-nowrap">{{ label }}</div>
    </label>
  </li>
{% endmacro %}
<!-- End radio input-->

<!-- Input date -->
{% macro date_input(name, label, value) %}
  <div class="w-full">
    <div class="text-[10px] uppercase leading-4 text-gray-500 mb-1">{{ label }}:</div>
    <div class="relative w-[75%]">
      <input id="{{ name }}" name="{{ name }}" value="{% if let Some(date) = value %}{{ date }}{% endif %}" type="date" class="inline-flex bg-white border border-gray-200 text-[0.825rem] text-center rounded-lg focus:ring-0 focus:border-primary-500 w-full px-2 py-1.5 hover:bg-gray-50" placeholder="Date {{ label }}">
      <button onclick="cleanInputField('{{ name }}')" class="absolute right-2 top-3 {% if let Some(date) = value %}visible{% else %}invisible{% endif %}">
        <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M0 0h24v24H0z"></path><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
      </button>
    </div>
  </div>
{% endmacro %}
<!-- End input date -->

<!-- Collapsible header -->
{% macro collapsible_header(title, label, items_length, max_visible_items_number) %}
  <div class="flex justify-between items-center">
    <div class="font-semibold text-filterTitle text-black leading-6">
      {{ title }}
    </div>
    <div>
      {% if items_length > max_visible_items_number %}
        <button type="button" onclick="updateCollapsibleFilterStatus('collapsible-{{ label }}', {{ max_visible_items_number }})" class="text-gray-700 border hover:bg-gray-700 hover:text-white focus:ring-0 focus:outline-none focus:ring-gray-300 font-medium rounded-full text-sm p-1 text-center inline-flex items-center">
          <span class="hidden group-[.collapsed]:block">
            <svg class="w-3 h-3" aria-hidden="true" stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M201.4 374.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 306.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"></path></svg>
          </span>
          <span class="block group-[.collapsed]:hidden">
            <svg class="w-3 h-3" aria-hidden="true" stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M201.4 137.4c12.5-12.5 32.8-12.5 45.3 0l160 160c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L224 205.3 86.6 342.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l160-160z"></path></svg>
          </span>
        </button>
      {% endif %}
    </div>
  </div>
{% endmacro %}
<!-- End collapsible header -->

<!-- Collapsible footer -->
{% macro collapsible_footer(label, items_length, max_visible_items_number) %}
  {% if items_length > max_visible_items_number %}
    <div class="mt-4 -mb-1.5">
      <button onclick="updateCollapsibleFilterStatus('collapsible-{{ label }}', {{ max_visible_items_number }})" type="button" class="text-gray-500 hover:text-gray-700 focus:ring-0 focus:outline-none focus:ring-gray-300 font-medium text-xs">
        <span class="hidden group-[.collapsed]:block">+ Show more</span>
        <span class="block group-[.collapsed]:hidden">- Show less</span>
      </button>
    </div>
  {% endif %}
{% endmacro %}
<!-- End collapsible footer -->

<!-- Collapsible filter -->
{% macro collapsible_filter_checkboxes(title, options, label, active_filters, max_visible_items_number) %}
  <div id="collapsible-{{ label }}" class="px-6 py-7 pt-5 border-b border-gray-100 group collapsed">
    {% call collapsible_header(title, label, options.len(), max_visible_items_number) %}
    <ul class="flex flex-wrap w-full gap-3 mt-3">
      <li>
        <input type="checkbox" name="any" value="" id="any-{{label}}" class="hidden peer" {% if active_filters.is_empty() %}checked{% endif %}>
        <label for="any-{{label}}" class="inline-flex items-center justify-between w-full p-2 text-gray-500 bg-white border rounded-lg cursor-pointer peer-checked:border-primary-500 hover:text-gray-600 peer-checked:text-primary-500 hover:bg-gray-50" onclick="updateAnyValue('{{ label }}')">
          <div class="text-[0.825rem] text-center text-nowrap">Any</div>
        </label>
      </li>
      {% for option in options %}
        {% if loop.index <= max_visible_items_number %}
          {% call checkbox_input(label, option.name, option.value, active_filters, "") %}
        {% else %}
          {% call checkbox_input(label, option.name, option.value, active_filters, "hidden") %}
        {% endif %}
      {% endfor %}
    </ul>
    {% call collapsible_footer(label, options.len(), max_visible_items_number) %}
  </div>
{% endmacro %}
<!-- End collapsible filter -->

<!-- Collapsible filter with radios -->
{% macro collapsible_filter_radios(title, options, label, active_filter, max_visible_items_number) %}
  <div id="collapsible-{{ label }}" class="px-6 py-7 pt-5 border-b border-gray-100 group collapsed">
    {% call collapsible_header(title, label, options.len(), max_visible_items_number) %}
    <ul class="flex flex-wrap w-full gap-3 mt-3">
      <li>
        {% if let Some(selected) = active_filter %}
          <input type="radio" name="any" value="" id="any-{{label}}" class="hidden peer">
        {% else %}
          <input type="radio" name="any" value="" id="any-{{label}}" class="hidden peer" checked>
        {% endif %}
        <label for="any-{{label}}" class="inline-flex items-center justify-between w-full p-2 text-gray-500 bg-white border rounded-lg cursor-pointer peer-checked:border-primary-500 hover:text-gray-600 peer-checked:text-primary-500 hover:bg-gray-50" onclick="updateAnyValue('{{ label }}', true)">
          <div class="text-[0.825rem] text-center text-nowrap">Any</div>
        </label>
      </li>
      {% for option in options %}
        {% if loop.index <= max_visible_items_number %}
          {% call radio_input(label, option.name, option.value, active_filter, "") %}
        {% else %}
          {% call radio_input(label, option.name, option.value, active_filter, "hidden") %}
        {% endif %}
      {% endfor %}
    </ul>
    {% call collapsible_footer(label, options.len(), max_visible_items_number) %}
  </div>
{% endmacro %}
<!-- End collapsible filter -->
