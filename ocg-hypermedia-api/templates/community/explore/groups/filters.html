{% import "community/explore/filters.html" as macros %}

{# Header Groups -#}
{% call macros::header() %}
{# End header groups -#}

{# Entity -#}
{% call macros::entity_radio(Entity::Groups) %}
{# End entity -#}

<form
  id="groups-form"
  hx-get='/explore/groups-section'
  hx-trigger="change"
  hx-target="#entity-section"
  hx-include="[name='ts_query'], [name='sort_by'], [name='view_mode']"
  hx-boost="true"
>
  {# Regions -#}
  {% call macros::collapsible_filter_checkboxes("Region", filters_options.region, "region", filters.region, "cols", 5) %}
  {# End Regions -#}

  {# Group category -#}
  {% call macros::collapsible_filter_checkboxes("Group category", filters_options.group_category, "group_category", filters.group_category, "rows", 4) %}
  {# End Group category -#}

  {% if filters.longitude.is_some() && filters.latitude.is_some() %}
    {# Distance -#}
    {% call macros::collapsible_filter_radios("Distance", filters_options.distance, "distance", filters.distance, "cols", 5) %}
    {# End distance -#}
  {% endif %}
</form>

<script type="module">
  import { showSpinner } from '/static/js/common/common.js';

  const form = document.getElementById('groups-form');
  form.addEventListener('htmx:beforeRequest', showSpinner);
</script>
