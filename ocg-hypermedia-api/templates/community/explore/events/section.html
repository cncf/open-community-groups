{% import "common.html" as common %}
{% extends "community/explore/entity_section_base.html" %}

{% block filters %}
  {% include "community/explore/events/filters.html" %}
{% endblock filters %}

{% block current_page %}
  {% if results_section.events.len() > 0 %}
    {% call common::current_page(total = results_section.total, items_number = results_section.events.len(), offset_value = filters.offset) %}
  {% endif %}
{% endblock current_page %}

{% block search_bar %}
  {% call common::search_bar(placeholder = "Search events by name, location or tags", value = filters.ts_query, input_styles = "w-full md:w-3/4", container_styles = "justify-center", with_help = true) %}
  <script type="module">
    import {
      triggerChangeOnForm
    } from '/static/js/community/explore/filters.js';
    import {
      cleanInputField,
      searchOnEnter
    } from '/static/js/community/explore/filters.js';

    const searchBtn = document.querySelector('#search-btn');
    searchBtn.addEventListener('click', () => triggerChangeOnForm("events-form", true));

    const searchInput = document.querySelector('#ts_query');
    searchInput.addEventListener('keydown', () => searchOnEnter(event, "events-form"));

    const cleanSearch = document.querySelector('#clean-search');
    cleanSearch.addEventListener('click', () => cleanInputField('ts_query', 'events-form'));
  </script>
{% endblock search_bar %}

{% block content %}
  {{ results_section|safe }}
{% endblock content %}
